/*! Copyright Pingdom AB 2019. All rights reserved. */
(function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1},bind1=function(fn,me){return function(){return fn.apply(me,arguments)}};!function(window,$){var Collection,CollectionView,CollectionViewFilterer,Model,Pingdom,STATE_CHANGE,SYNCED,SYNCING,SyncMachine,UNSYNCED,View,attach,bind,event,fn,insertView,j,len,ref,serialize,setHTML,toggleElement;Pingdom=window.Pingdom=window.Pingdom||{},Pingdom.Backbone={},serialize=function(data){if("function"==typeof data.serialize)return data.serialize();if("function"==typeof data.toJSON)return data.toJSON();throw new TypeError("serialize: Unknown data was passed")},bind=function(){return Function.prototype.bind?function(item,ctx){return item.bind(ctx)}:_.bind?_.bind:void 0}(),attach=function(view){var actual;return actual=$(view.container),"function"==typeof view.containerMethod?view.containerMethod(actual,view.el):actual[view.containerMethod](view.el)},setHTML=function(elem,html){return elem.html(html)},toggleElement=function(elem,visible){return elem.toggle(visible)},insertView=function(list,viewEl,position,length,itemSelector){var children,childrenLength,insertInMiddle,isEnd,method;return insertInMiddle=position>0&&length>position,isEnd=function(length){return 0===length||position>=length},insertInMiddle||itemSelector?(children=list.children(itemSelector),childrenLength=children.length,children[position]!==viewEl?isEnd(childrenLength)?list.append(viewEl):0===position?children.eq(position).before(viewEl):children.eq(position-1).after(viewEl):void 0):(method=isEnd(length)?"append":"prepend",list[method](viewEl))},Pingdom.Backbone.Model=Model=function(superClass){function Model(){return Model.__super__.constructor.apply(this,arguments)}return extend(Model,superClass),Model.prototype.getAll=function(){return this.attributes},Model}(Backbone.Model),Pingdom.Backbone.Collection=Collection=function(superClass){function Collection(){return Collection.__super__.constructor.apply(this,arguments)}return extend(Collection,superClass),Collection.prototype.model=Pingdom.Backbone.Model,Collection}(Backbone.Collection),Pingdom.Backbone.View=View=function(superClass){function View(options){var optName,optValue,render;if(options)for(optName in options)optValue=options[optName],indexOf.call(this.optionNames,optName)>=0&&(this[optName]=optValue);render=this.render,this.render=function(_this){return function(){return _this.disposed?!1:(render.apply(_this,arguments),_this.autoAttach&&_this.attach.apply(_this,arguments),_this)}}(this),this.subviews=[],this.subviewsByName={},this.noWrap&&this.container&&(this.el=this.container),View.__super__.constructor.apply(this,arguments),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(_this){return function(subject){return subject&&subject!==_this.collection?void 0:_this.dispose()}}(this)),this.autoRender&&this.render()}return extend(View,superClass),_.extend(View.prototype,Backbone.Events),View.prototype.autoAttach=!0,View.prototype.container=null,View.prototype.subviews=null,View.prototype.subviewsByName=null,View.prototype.noWrap=!1,View.prototype.containerMethod=$?"append":"appendChild",View.prototype.keepElement=!1,View.prototype.optionNames=["autoAttach","autoRender","container","containerMethod","noWrap"],View.prototype.getTemplateData=function(){var data,source;return data=this.model?serialize(this.model):this.collection?{items:serialize(this.collection),length:this.collection.length}:{},source=this.model||this.collection,source&&("function"!=typeof source.isSynced||"synced"in data||(disposedata.synced=source.isSynced())),data},View.prototype.getTemplateFunction=function(){return this.template},View.prototype.render=function(){var el,html,templateFunc;if(this.disposed)return!1;if(templateFunc=this.getTemplateFunction(),"function"==typeof templateFunc)if(html=templateFunc(this.getTemplateData()),this.noWrap){if(el=document.createElement("div"),el.innerHTML=html,el.children.length>1)throw new Error("There must be a single top-level element when using `noWrap`.");this.undelegateEvents(),this.setElement(el.firstChild,!0)}else setHTML($?this.$el:this.el,html);return this},View.prototype.attach=function(){return this.container&&!document.body.contains(this.el)?(attach(this),this.trigger("addedToDOM")):void 0},View.prototype.subview=function(name,view){var byName,subviews;return subviews=this.subviews,byName=this.subviewsByName,name&&view?(this.removeSubview(name),subviews.push(view),byName[name]=view,view):name?byName[name]:void 0},View.prototype.removeSubview=function(nameOrView){var byName,index,name,otherName,otherView,subviews,view;if(nameOrView){if(subviews=this.subviews,byName=this.subviewsByName,"string"==typeof nameOrView)name=nameOrView,view=byName[name];else{view=nameOrView;for(otherName in byName)if(otherView=byName[otherName],otherView===view){name=otherName;break}}if(name&&view&&view.dispose)return view.dispose(),index=_.indexOf(subviews,view),-1!==index&&subviews.splice(index,1),delete byName[name]}},View.prototype.disposed=!1,View.prototype.dispose=function(){var j,k,len,len1,prop,properties,ref,subview;if(!this.disposed){for(ref=this.subviews,j=0,len=ref.length;len>j;j++)subview=ref[j],subview.dispose();for(this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),properties=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],k=0,len1=properties.length;len1>k;k++)prop=properties[k],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},View}(Backbone.View),Pingdom.Backbone.CollectionViewFilterer=CollectionViewFilterer=function(){function CollectionViewFilterer(){}return CollectionViewFilterer.prototype.filterCallback=function(view,included){return $&&view.$el.stop(!0,!0),view.visible=included,toggleElement($?view.$el:view.el,included)},CollectionViewFilterer.prototype.filter=function(filterer,filterCallback){var hasItemViews,included,index,item,j,len,passedItems,ref,view,visibilityChanged,visibleItemsBeforeFilter;if(visibleItemsBeforeFilter=this.visibleItems.map(function(item){return item.cid}),("function"==typeof filterer||null===filterer)&&(this.filterer=filterer),("function"==typeof filterCallback||null===filterCallback)&&(this.filterCallback=filterCallback),hasItemViews=function(_this){return function(){var name;if(_this.subviews.length>0)for(name in _this.subviewsByName)if("itemView:"===name.slice(0,9))return!0;return!1}}(this)())for(passedItems=0,ref=this.collection.models,index=j=0,len=ref.length;len>j;index=++j){if(item=ref[index],included="function"==typeof this.filterer?this.filterer(item,index,passedItems):!0,included&&(passedItems+=1),view=this.subview("itemView:"+item.cid),!view)throw new Error("CollectionView#filter: no view found for "+item.cid);this.filterCallback(view,included),this.updateVisibleItems(view.model,included,!1)}return visibilityChanged=function(_this){return function(){var a,b,i,k,len1;if(a=visibleItemsBeforeFilter,b=_this.visibleItems,a.length!==b.length)return!0;for(i=k=0,len1=a.length;len1>k;i=++k)if(item=a[i],item!==b[i].cid)return!0;return!1}}(this)(),visibilityChanged&&this.trigger("visibilityChange",this.visibleItems),visibleItemsBeforeFilter=[],this},CollectionViewFilterer}(),Pingdom.Backbone.CollectionView=CollectionView=function(superClass){function CollectionView(options){this.renderAllItems=bind1(this.renderAllItems,this),this.itemsReset=bind1(this.itemsReset,this),this.itemRemoved=bind1(this.itemRemoved,this),this.itemAdded=bind1(this.itemAdded,this),this.toggleFallback=bind1(this.toggleFallback,this),this.visibleItems=[],CollectionView.__super__.constructor.apply(this,arguments)}return extend(CollectionView,superClass),_.extend(CollectionView.prototype,CollectionViewFilterer.prototype),CollectionView.prototype.itemView=null,CollectionView.prototype.itemSelector=null,CollectionView.prototype.listSelector=null,CollectionView.prototype.$list=null,CollectionView.prototype.fallbackSelector=null,CollectionView.prototype.$fallback=null,CollectionView.prototype.loadingSelector=null,CollectionView.prototype.$loading=null,CollectionView.prototype.filterer=null,CollectionView.prototype.visibleItems=null,CollectionView.prototype.animationDuration=0,CollectionView.prototype.optionNames=View.prototype.optionNames.concat(["renderItems","itemView"]),CollectionView.prototype.initialize=function(options){return null==options&&(options={}),this.addCollectionListeners(),null!=options.filterer&&this.filter(options.filterer),CollectionView.__super__.initialize.apply(this,arguments)},CollectionView.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},CollectionView.prototype.render=function(){var listSelector;return CollectionView.__super__.render.apply(this,arguments),listSelector=_.result(this,"listSelector"),$?this.$list=listSelector?this.$(listSelector):this.$el:this.list=listSelector?this.find(this.listSelector):this.el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},CollectionView.prototype.initFallback=function(){return this.fallbackSelector?($?this.$fallback=this.$(this.fallbackSelector):this.fallback=this.find(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},CollectionView.prototype.toggleFallback=function(){var visible;return visible=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),toggleElement($?this.$fallback:this.fallback,visible)},CollectionView.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?($?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},CollectionView.prototype.toggleLoadingIndicator=function(){var visible;return visible=0===this.collection.length&&this.collection.isSyncing(),toggleElement($?this.$loading:this.loading,visible)},CollectionView.prototype.itemAdded=function(item,collection,options){return this.insertView(item,this.renderItem(item),options.at)},CollectionView.prototype.itemRemoved=function(item){return this.removeViewForItem(item)},CollectionView.prototype.itemsReset=function(){return this.renderAllItems()},CollectionView.prototype.getItemViews=function(){var itemViews,name,ref,view;if(itemViews={},this.subviews.length>0){ref=this.subviewsByName;for(name in ref)view=ref[name],"itemView:"===name.slice(0,9)&&(itemViews[name.slice(9)]=view)}return itemViews},CollectionView.prototype.renderAllItems=function(){var cid,index,item,items,j,k,len,len1,ref,remainingViewsByCid,view;for(items=this.collection.models,this.visibleItems=[],remainingViewsByCid={},j=0,len=items.length;len>j;j++)item=items[j],view=this.subview("itemView:"+item.cid),view&&(remainingViewsByCid[item.cid]=view);ref=this.getItemViews();for(cid in ref)hasProp.call(ref,cid)&&(view=ref[cid],cid in remainingViewsByCid||this.removeSubview("itemView:"+cid));for(index=k=0,len1=items.length;len1>k;index=++k)item=items[index],view=this.subview("itemView:"+item.cid),view?this.insertView(item,view,index,!1):this.insertView(item,this.renderItem(item),index);return 0===items.length?this.trigger("visibilityChange",this.visibleItems):void 0},CollectionView.prototype.renderItem=function(item){var view;return view=this.subview("itemView:"+item.cid),view||(view=this.initItemView(item),this.subview("itemView:"+item.cid,view)),view.render(),view},CollectionView.prototype.initItemView=function(model){if(this.itemView)return new this.itemView({autoRender:!1,model:model});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},CollectionView.prototype.attachViewAt=function(view,position){var elem,length,list;return elem=$?view.$el:view.el,length=this.collection.length,list=$?this.$list:this.list,insertView(list,elem,position,length,this.itemSelector)},CollectionView.prototype.insertView=function(item,view,position,enableAnimation){var elem,included;return null==enableAnimation&&(enableAnimation=!0),0===this.animationDuration&&(enableAnimation=!1),"number"!=typeof position&&(position=this.collection.indexOf(item)),included="function"==typeof this.filterer?this.filterer(item,position,this.visibleItems.length):!0,elem=$?view.$el:view.el,included&&enableAnimation&&startAnimation(elem,this.useCssAnimation,this.animationStartClass),this.filterer&&this.filterCallback(view,included),this.attachViewAt(view,position),view.trigger("addedToParent"),this.updateVisibleItems(item,included),included&&enableAnimation&&(this.useCssAnimation?setTimeout(function(_this){return function(){return addClass(elem,_this.animationEndClass)}}(this),0):endAnimation(elem,this.animationDuration)),view},CollectionView.prototype.removeViewForItem=function(item){return this.updateVisibleItems(item,!1),this.removeSubview("itemView:"+item.cid)},CollectionView.prototype.updateVisibleItems=function(item,includedInFilter,triggerEvent){var includedInVisibleItems,visibilityChanged,visibleItemsIndex;return null==triggerEvent&&(triggerEvent=!0),visibilityChanged=!1,visibleItemsIndex=_.indexOf(this.visibleItems,item),includedInVisibleItems=-1!==visibleItemsIndex,includedInFilter&&!includedInVisibleItems?(this.visibleItems.push(item),visibilityChanged=!0):!includedInFilter&&includedInVisibleItems&&(this.visibleItems.splice(visibleItemsIndex,1),visibilityChanged=!0),visibilityChanged&&triggerEvent&&this.trigger("visibilityChange",this.visibleItems),visibilityChanged},CollectionView}(Pingdom.Backbone.View),UNSYNCED="unsynced",SYNCING="syncing",SYNCED="synced",STATE_CHANGE="syncStateChange",SyncMachine={_syncState:UNSYNCED,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===UNSYNCED},isSynced:function(){return this._syncState===SYNCED},isSyncing:function(){return this._syncState===SYNCING},unsync:function(){var ref;((ref=this._syncState)===SYNCING||ref===SYNCED)&&(this._previousSync=this._syncState,this._syncState=UNSYNCED,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},beginSync:function(){var ref;((ref=this._syncState)===UNSYNCED||ref===SYNCED)&&(this._previousSync=this._syncState,this._syncState=SYNCING,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},finishSync:function(){this._syncState===SYNCING&&(this._previousSync=this._syncState,this._syncState=SYNCED,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},abortSync:function(){this._syncState===SYNCING&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))}},ref=[UNSYNCED,SYNCING,SYNCED,STATE_CHANGE],fn=function(event){return SyncMachine[event]=function(callback,context){return null==context&&(context=this),this.on(event,callback,context),this._syncState===event?callback.call(context):void 0}};for(j=0,len=ref.length;len>j;j++)event=ref[j],fn(event);return"function"==typeof Object.freeze&&Object.freeze(SyncMachine),Pingdom.Backbone.SyncMachine=SyncMachine}(window,Backbone.$)}).call(this);
(function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};!function(window,$){var Collection,CollectionView,CollectionViewFilterer,FilterManager,Model,Table,TableCollectionViewFilterer,TableGroup,TableRow,View;return Model=Pingdom.Backbone.Model,Collection=Pingdom.Backbone.Collection,CollectionView=Pingdom.Backbone.CollectionView,View=Pingdom.Backbone.View,CollectionViewFilterer=Pingdom.Backbone.CollectionViewFilterer,FilterManager=FilterManager=function(){function FilterManager(){this.removeFilter=bind(this.removeFilter,this),this.getFilter=bind(this.getFilter,this),this.addFilter=bind(this.addFilter,this)}return FilterManager.prototype._filters={},FilterManager.prototype.addFilter=function(name,filterer){var key,value;if(_.isObject(name)){for(key in name)value=name[key],this.addFilter(key,value);return this}return"function"==typeof filterer&&(this._filters[name]=filterer,"function"==typeof this.filter&&this.filter()),this},FilterManager.prototype.getFilter=function(name){var filter,filters,j,len,prefix,result;if(!name)return this._filters;for(result={},filters=_.keys(this._filters),j=0,len=filters.length;len>j;j++)filter=filters[j],prefix=function(){var m;return m=filter.match(/(.*)\..*$/),m?m[1]:""}(),(name===filter||name===prefix)&&(result||(result={}),result[filter]=this._filters[filter]);return result},FilterManager.prototype.removeFilter=function(name){var filter,key,value;if(_.isObject(name)){for(key in name)value=name[key],this.removeFilter(key);return this}for(filter in this.getFilter(name))this._filters[filter]=null;return"function"==typeof this.filter&&this.filter(),this},FilterManager}(),TableCollectionViewFilterer=TableCollectionViewFilterer=function(superClass){function TableCollectionViewFilterer(){return this.filtererConstructor=bind(this.filtererConstructor,this),TableCollectionViewFilterer.__super__.constructor.apply(this,arguments)}return extend(TableCollectionViewFilterer,superClass),_.extend(TableCollectionViewFilterer.prototype,FilterManager.prototype),TableCollectionViewFilterer.prototype.filter=function(filterer,filterCallback){return this.filterer=filterer||this.filterer||this.filtererConstructor(this),TableCollectionViewFilterer.__super__.filter.call(this,this.filterer,this.filterCallback)},TableCollectionViewFilterer.prototype.filterer=function(){return this.filtererConstructor(this).apply(this,Array.prototype.slice.call(arguments))},TableCollectionViewFilterer.prototype.filtererConstructor=function(view,filters){var filterer;return filters=filters||this._filters||{},filterer=function(item,index,passedItems){var filter,name;for(name in filters)if(filter=filters[name],filter&&!filter.call(view,item,index,passedItems))return!1;return!0},filterer.bind(view)},TableCollectionViewFilterer.prototype.filterCallback=function(view,included){var $el,index;return $&&view.$el.stop(!0,!0),view.visible=included,$&&view.$el.stop(!0,!0),$el=$($?view.$el:view.el),included?view.detached&&(index=this.collection.indexOf(view.model),this.attachViewAt(view,index),view.detached=!1):($el&&!view.detached&&$el.detach(),view.detached=!0),view},TableCollectionViewFilterer}(CollectionViewFilterer),Table=Table=function(superClass){function Table(){return this.toggleFallback=bind(this.toggleFallback,this),Table.__super__.constructor.apply(this,arguments)}return extend(Table,superClass),Table.prototype.autoRender=!0,Table.prototype.renderItems=!0,Table.prototype.collection=new Collection,Table.prototype.className="pd-table-3",Table.prototype.listSelector=".pd-table-container",Table.prototype.fallbackSelector=".pd-table-fallback",Table.prototype.loadingSelector=".pd-table-loading",Table.prototype.groupBy="all",Table.prototype.columns=void 0,Table.prototype.data=void 0,Table.prototype.sortOn="id",Table.prototype.animationDuration=0,Table.prototype.initialize=function(options){var j,len,opt,ref;for(ref=["data","groupBy","columns","rowView","groupView","sortOn"],j=0,len=ref.length;len>j;j++)opt=ref[j],options[opt]&&void 0!==options[opt]&&(this[opt]=options[opt]);return void 0!==this.columns&&(this.parseColumns(),this.groupItems()),this.filterManager=new FilterManager,this.data instanceof Collection&&(this.listenTo(this.data,"add",function(_this){return function(item,items,xhr){var group;return group=_this.findGroupForItem(item),group?group.get("rows").add(item):_this.groupItems()}}(this)),this.listenTo(this.data,"remove",function(_this){return function(item){var group,k,len1,ref1;for(ref1=_this.collection.models,k=0,len1=ref1.length;len1>k;k++)if(group=ref1[k],group.get("rows").find(item))return group.get("rows").remove(item),void(group.get("rows").length||_this.collection.remove(group))}}(this)),this.listenTo(this.data,"change",function(_this){return function(item){var _new,_prev,newGroup,prevGroup,ref1,ref2,ref3,ref4;return(null!=(ref1=_this.groupBy)?ref1.field:void 0)&&(ref2=null!=(ref3=_this.groupBy)?ref3.field:void 0,indexOf.call(_.keys(item.changed),ref2)>=0)?(_prev=item._previousAttributes[_this.groupBy.field],_new=item.get(_this.groupBy.field),prevGroup=_this.collection.findWhere({name:_prev}),newGroup=_this.collection.findWhere({name:_new}),prevGroup&&(null!=(ref4=prevGroup.get("rows"))&&ref4.remove(item),prevGroup.get("rows").length||_this.collection.remove(prevGroup)),newGroup?newGroup.get("rows").add(item):_this.addGroup(_new,[item])):void 0}}(this)),this.listenTo(this.data,"reset",this.groupItems)),Table.__super__.initialize.apply(this,arguments)},Table.prototype.initFallback=function(){return Table.__super__.initFallback.apply(this,arguments),this.listenTo(this.data,"syncStateChange",this.toggleFallback)},Table.prototype.toggleFallback=function(){var el,visible;return visible=0===this.visibleItems.length&&("function"==typeof this.data.isSynced?this.data.isSynced():!0),el=$?this.$fallback:this.fallback,el?el.toggle(visible):void 0},Table.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.data.isSyncing?($?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.data,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},Table.prototype.toggleLoadingIndicator=function(){var el,visible;return visible=0===this.data.length&&this.data.isSyncing(),el=$?this.$loading:this.loading,el?el.toggle(visible):void 0},Table.prototype.addFilter=function(){var args,cid,ref,results,view;args=Array.prototype.slice.call(arguments),this.filterManager.addFilter.apply(this.filterManager,args),ref=this.getGroupItemViews(),results=[];for(cid in ref)view=ref[cid],results.push(view.addFilter.apply(view,args));return results},Table.prototype.getFilter=function(){var args;return args=Array.prototype.slice.call(arguments),this.filterManager.getFilter.apply(this.filterManager,args)},Table.prototype.removeFilter=function(){var args,cid,ref,results,view;args=Array.prototype.slice.call(arguments),this.filterManager.removeFilter.apply(this.filterManager,args),ref=this.getGroupItemViews(),results=[];for(cid in ref)view=ref[cid],results.push(view.removeFilter.apply(view,args));return results},Table.prototype.filter=function(view){var args,cid,ref,results;if(args=Array.prototype.slice.call(arguments),view)return view.filter.apply(view,args);ref=this.getGroupItemViews(),results=[];for(cid in ref)view=ref[cid],results.push(view.filter.apply(view,args));return results},Table.prototype.template=function(){return'<div class="pd-table-container"></div>\n<div class="pd-table-empty">\n    <div class="pd-table-loading" style="display: none;">\n        <div class="loading-table-spinner"></div>\n    </div>\n    <div class="pd-table-fallback" style="display: none;">\n        <div class="pd-table-info-icon icon-info"></div>\n        <h2>Nothing here</h2>\n        You can of course add to this page, but right now there’s nothing here.\n        <br>Nada. Nothing. Zip. Zilch. Zero.\n    </div>\n</div>\n'},Table.prototype.parseColumns=function(){var column,i,j,len,ref,ref1,results;if(!this.columns&&_.isArray(this.columns))throw new Error("Table requires columns array to be specified");for(ref=this.columns,results=[],i=j=0,len=ref.length;len>j;i=++j)column=ref[i],_.isString(column)&&(this.columns[i]={title:column}),(null!=(ref1=column.name)?ref1.length:void 0)&&void 0===column.title&&(this.columns[i].title=column.name.charAt(0).toUpperCase()+column.name.slice(1,column.name.length)),null!=column.condition&&_.isFunction(column.condition)?results.push(this.columns[i].condition=column.condition()):results.push(this.columns[i].condition=column.condition||!0);return results},Table.prototype.initItemView=function(model){return this.initGroupView(model)},Table.prototype.initGroupView=function(model){var view;if(this.groupView)return view=new this.groupView({autoRender:!1,model:model}),this.listenTo(view,"visibilityChange",function(_this){return function(visibleRows){return _this.trigger("rowVisibilityChange",visibleRows)}}(this)),view.addFilter(this.filterManager.getFilter()),view;throw new Error("The CollectionView#groupView property must be defined or the initGroupView() must be overridden.")},Table.prototype.getGroupItemViews=function(){return this.getItemViews()},Table.prototype.getRowItemViews=function(){var group,groupCid,ref,ref1,row,rowCid,rowViews;rowViews=[],ref=this.getItemViews();for(groupCid in ref){group=ref[groupCid],ref1=group.getItemViews();for(rowCid in ref1)row=ref1[rowCid],rowViews.push(row)}return rowViews},Table.prototype.getVisibleItems=function(){var group,groupCid,ref,visibleItems;visibleItems=[],ref=this.getItemViews();for(groupCid in ref)group=ref[groupCid],group.collapsed||group.visibleItems.map(function(item){return visibleItems.push(item)});return visibleItems},Table.prototype.getItemGroups=function(items){var groups,ref,ref1;return items instanceof Backbone.Collection||(items=new Collection(items)),groups={},groups=(null!=(ref=this.groupBy)?ref.field:void 0)&&"all"!==(null!=(ref1=this.groupBy)?ref1.field:void 0)&&"all"!==this.groupBy?_.isFunction(this.groupBy)?this.groupBy.field(items.models):_.groupBy(items.models,function(_this){return function(item){return item.get(_this.groupBy.field)}}(this)):{all:items.models}},Table.prototype.groupItems=function(){var groups,name,rows;this.collection.reset(),groups=this.getItemGroups(this.data);for(name in groups)rows=groups[name],this.addGroup(name,rows);return this},Table.prototype.addGroup=function(name,rows){var index,ref;if(null==rows&&(rows=[]),!name)throw new Error("A TableGroup needs to have a name");return index=(null!=(ref=this.groupBy)?ref.order:void 0)?_.indexOf(this.groupBy.order,name):-1,this.collection.comparator="index",this.collection.add({index:index,name:name,rows:new Collection(rows),rowView:this.rowView,cols:this.columns,sortOn:this.sortOn}),this},Table.prototype.findGroupForItem=function(item){var group,j,len,ref,ref1;if((!(null!=(ref=this.groupBy)?ref.field:void 0)||"all"===this.groupBy)&&this.collection.length)return this.collection.models[0];for(ref1=this.collection.models,j=0,len=ref1.length;len>j;j++)if(group=ref1[j],group.get("name")===item.get(this.groupBy.field))return group;return null},Table}(CollectionView),TableRow=TableRow=function(superClass){function TableRow(){return TableRow.__super__.constructor.apply(this,arguments)}return extend(TableRow,superClass),TableRow.prototype.tagName="tr",TableRow.prototype.className="pd-table-row show",TableRow.prototype.cols=[],TableRow.prototype.template=function(data){var col,cols,getRowData,j,len,result;if(cols=data.cols,getRowData=data.getRowData,result=[],cols)for(j=0,len=cols.length;len>j;j++)col=cols[j],col.field?result.push("<td>"+getRowData(col.field)+"</td>"):result.push("<td></td>");return result.join("")},TableRow.prototype.initialize=function(options){var j,len,opt,ref;for(ref=["cols"],j=0,len=ref.length;len>j;j++)opt=ref[j],options[opt]&&(this[opt]=options[opt]);return TableRow.__super__.initialize.apply(this,arguments)},TableRow.prototype.getTemplateFunction=function(){return this.template},TableRow.prototype.getTemplateData=function(){var getRowData;return getRowData=function(_this){return function(field){return _this.model.get(field)}}(this),_.extend({cols:this.cols,getRowData:getRowData},TableRow.__super__.getTemplateData.apply(this,arguments))},TableRow}(View),TableGroup=TableGroup=function(superClass){function TableGroup(){return this.collapseToggle=bind(this.collapseToggle,this),this.itemRemoved=bind(this.itemRemoved,this),TableGroup.__super__.constructor.apply(this,arguments)}return extend(TableGroup,superClass),_.extend(TableGroup.prototype,TableCollectionViewFilterer.prototype),TableGroup.prototype.renderItems=!0,TableGroup.prototype.className="pd-table-group",TableGroup.prototype.filterCallback=TableCollectionViewFilterer.prototype.filterCallback,TableGroup.prototype.template=function(data){return _.template('<% if (name !== undefined && name.length) { %>\n<div class="group-title">\n    <span class="pd-table-group-onoff on"></span>\n    &nbsp;<%= name %>\n</div>\n<% } %>\n<table class="pd-table">\n    <thead>\n        <% if (cols !== undefined) { %>\n        <tr>\n            <% _.forEach(cols, function(col) { %>\n                <th class="table-group-column <% if (col.field === sortOn) { %>active sort-up<% } %> <% if (col.field) { %>sortable<% } %>"\n                    <% if (col.field) { %>data-col="<%= col.field %>"<% } %>\n                    style="width:<%= col.width ? col.width : \'auto\' %>; <%= col.textalign ? \'text-align: \' + col.textalign + \';\' : \'\' %>">\n\n                    <% if (col.multiselect) { %>\n                        <input class="pd-checkbox pd-table-select" type="checkbox" name="checkbox-group-<%= name %>">\n                        <label class="pd-checkbox-label" for="checkbox-group-<%= name %>"></label>\n                    <% } %>\n\n                    <%= col.title %>\n                </th>\n            <% }); %>\n        </tr>\n        <% } %>\n    </thead>\n    <tbody></tbody>\n    <tfoot></tfoot>\n</table>')(data)},TableGroup.prototype.listSelector="tbody",TableGroup.prototype.itemView=TableRow,TableGroup.prototype.animationDuration=0,TableGroup.prototype.events={"click .group-title":"collapseToggle","click .table-group-column":"sortOnColumn"},TableGroup.prototype.initialize=function(options){return this.parent=options.parent,this.itemView=this.model.get("rowView"),this.collection=this.model.get("rows"),this._filterThrottler=_.throttle(this.filter,200),this.sortOnField(this.model.get("sortOn"),"up"),TableGroup.__super__.initialize.apply(this,arguments)},TableGroup.prototype.getTemplateFunction=function(){return this.template},TableGroup.prototype.itemRemoved=function(item){return TableGroup.__super__.itemRemoved.apply(this,arguments),this._filterThrottler()},TableGroup.prototype.collapseToggle=function(){return this.$el.hasClass("collapsed")?(this.$el.removeClass("collapsed"),this.collapsed=!1):(this.$el.addClass("collapsed"),this.collapsed=!0),this.trigger("collapsed",this),this},TableGroup.prototype.initItemView=function(model){if(this.itemView)return new this.itemView(_.extend(this.model.attributes,{autoRender:!1,model:model}));throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},TableGroup.prototype.sortOnColumn=function(evt){var $col,direction;return evt.target&&$(evt.target).data("col")?($col=$(evt.target),direction="up",$col.hasClass("sort-"+direction)&&(direction="down"),this.$(".table-group-column").removeClass("sort-down").removeClass("sort-up").removeClass("active"),$col.addClass("sort-"+direction+" active"),this.sortOnField($col.data("col"),direction)):void 0},TableGroup.prototype.sortOnField=function(field,direction){return this.collection.comparator=function(a,b){var d;return a=a.get(field),b=b.get(field),d="up"===direction?1:-1,a>b?1*d:b>a?-1*d:0},this.collection.sort()},TableGroup.prototype.attachViewAt=function(view,index){return view.visible?TableGroup.__super__.attachViewAt.apply(this,arguments):void 0},TableGroup.prototype.updateVisibleItems=function(item,includedInFilter,triggerEvent){return null==triggerEvent&&(triggerEvent=!0),TableGroup.__super__.updateVisibleItems.apply(this,arguments),this.visibleItems.length?this.$el.show():this.$el.hide()},TableGroup}(CollectionView),Table.prototype.groupView=TableGroup,Table.prototype.rowView=TableRow,Pingdom.pdTable3=Table,Pingdom.pdTable3.TableRow=TableRow,Pingdom.pdTable3.TableGroup=TableGroup,Pingdom.pdTable3.TableCollectionViewFilterer=TableCollectionViewFilterer}(window,Backbone.$)}).call(this);
(function(){var Collection,Model,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Model=Backbone.Model,Collection=Backbone.Collection,function(Pingdom){var LinearGraph,LinearGraphCanvas,isCanvasSupported;return Pingdom.LinearGraph=LinearGraph=function(){function LinearGraph(options){this.render=bind(this.render,this);var k,ref,v;this.options=$.extend(this.defaultOptions,options),ref=this.defaultOptions;for(k in ref)if(v=ref[k],"undefined"==typeof this.options[k]||null===this.options[k])throw new Error("LineGraph requires "+k+" option to be set");this._setElement(),this.on("change",function(_this){return function(){return _this.render()}}(this)),this.setData(this.options.series),this.renderThrottle=_.throttle(this.render,250),$(window).on("resize",this.renderThrottle),this.render()}return _.extend(LinearGraph.prototype,Pingdom.component.EventComponent.prototype),LinearGraph.prototype._svgNS="http://www.w3.org/2000/svg",LinearGraph.prototype.template=_.template('<svg class="pd-line-graph" version="1.1", xmlns="<%- ns %>", width="<%- width %>", height="<%- height %>">\n    <desc>Created @ Pingdom</desc>\n</svg>'),LinearGraph.prototype.defaultOptions={container:null,classNames:"",width:"100%",height:200,strokeWidth:2,xAxis:{key:"x",max:null},yAxis:{key:"y",max:null},series:[]},LinearGraph.prototype._setElement=function(){return this.$el=$(this.template({width:_.isNumber(this.options.width)?this.options.width+"px":this.options.width,height:_.isNumber(this.options.height)?this.options.height+"px":this.options.height,strokeWidth:this.options.strokeWidth,classNames:this.options.classNames,ns:this._svgNS})).appendTo(this.options.container),this.el=this.$el[0],this.$el.attr("viewBox","0 0 "+this.$el.height()+" "+this.$el.width()),this},LinearGraph.prototype.setData=function(series){var collection,dataItem,index,j,k,l,len,len1,ref,serie,v;for(null==series&&(series=[]),this.series=[],j=0,len=series.length;len>j;j++){serie=series[j],collection=new Collection,collection.options={};for(k in serie)v=serie[k],"data"!==k&&(collection.options[k]=v);for(ref=serie.data,index=l=0,len1=ref.length;len1>l;index=++l)dataItem=ref[index],_.isArray(dataItem)?collection.add({valueX:dataItem[0],valueY:dataItem[1]}):collection.add({valueX:index,valueY:dataItem});this.series.push(collection)}return this.addEventListeners(),this.trigger("change"),this},LinearGraph.prototype.addEventListeners=function(){var collection,j,len,ref;for(ref=this.series,j=0,len=ref.length;len>j;j++)collection=ref[j],collection.on("add remove reset sort",function(_this){return function(){return _this.trigger("change")}}(this));return this},LinearGraph.prototype.removeEventListeners=function(){var collection,j,len,ref;for(ref=this.series,j=0,len=ref.length;len>j;j++)collection=ref[j],collection.off("add remove reset sort");return this},LinearGraph.prototype.getElementDimensions=function(){var i,index,j,len,ref,result;if(!this.$el)return[0,0];for(result=[],ref=["width","height"],index=j=0,len=ref.length;len>j;index=++j)i=ref[index],_.isNumber(this.$el[i])&&(result[index]=this.$el[i]),"function"==typeof this.$el[i]&&(result[index]=this.$el[i]());return result},LinearGraph.prototype.getLinePaths=function(collection,options){var d,i,index,j,len,model,path,ref,result,x,y;for(d={width:this.getElementDimensions()[0],height:this.getElementDimensions()[1]},result=[""],index=0,path="",ref=collection.models,i=j=0,len=ref.length;len>j;i=++j)model=ref[i],_.isNull(model.get("valueY"))?(path="",index++):(x=i*(d.width/collection.length),y=d.height-model.get("valueY")*(d.height/options.yMax),path+=0===result[index].length?"M "+x+" "+y:i===collection.length-1?" L "+d.width+" "+y:" L "+x+" "+y),result[index]=path;return result},LinearGraph.prototype.render=function(){var collection,j,len,ref,ref1,yMax;for(yMax=(null!=(ref=this.options.yAxis)?ref.max:void 0)||function(_this){return function(){var collection,j,l,len,len1,model,ref1,ref2,result;for(result=0,ref1=_this.series,j=0,len=ref1.length;len>j;j++)for(collection=ref1[j],ref2=collection.models,l=0,len1=ref2.length;len1>l;l++)model=ref2[l],model.get("valueY")>result&&(result=model.get("valueY"));return result}}(this)(),this.$el.find("g.serie").remove(),ref1=this.series,j=0,len=ref1.length;len>j;j++)collection=ref1[j],this.renderSerie(collection,_.extend(collection.options,{yMax:yMax}));return this},LinearGraph.prototype.renderSerie=function(collection,options){var classNames,d,groupEl,j,len,path,paths;for(d={width:this.getElementDimensions()[0],height:this.getElementDimensions()[1]},paths=this.getLinePaths(collection,options),classNames=["serie"],options.classNames&&classNames.push(options.classNames.split(" ")),groupEl=document.createElementNS(this._svgNS,"g"),groupEl.setAttributeNS(null,"class",""+classNames.join(" ")),this.$el[0].appendChild(groupEl),j=0,len=paths.length;len>j;j++)path=paths[j],this.renderLine(path,groupEl,d);return this},LinearGraph.prototype.renderLine=function(path,groupEl,d){var fillPath,fillPathEl,p,pathEl;return p=path.match(/[ML].[0-9.]+.[0-9.]+/g),p&&(fillPath=path+(" L "+p[p.length-1].split(/\s/)[1]+" "+d.height+" L "+p[0].split(/\s/)[1]+" "+d.height+" z"),fillPathEl=document.createElementNS(this._svgNS,"path"),fillPathEl.setAttributeNS(null,"d",fillPath),fillPathEl.setAttributeNS(null,"stroke","none"),fillPathEl.setAttributeNS(null,"class","fill"),fillPathEl.setAttributeNS(null,"zIndex",0),groupEl.appendChild(fillPathEl),pathEl=document.createElementNS(this._svgNS,"path"),pathEl.setAttributeNS(null,"d",path),pathEl.setAttributeNS(null,"stroke-width",this.options.strokeWidth||options.strokeWidth||2),pathEl.setAttributeNS(null,"stroke-linejoin","round"),pathEl.setAttributeNS(null,"stroke-linecap","round"),pathEl.setAttributeNS(null,"fill","none"),pathEl.setAttributeNS(null,"class","line"),pathEl.setAttributeNS(null,"zIndex",1),groupEl.appendChild(pathEl)),this},LinearGraph.prototype.disposed=!1,LinearGraph.prototype.dispose=function(){var j,len,prop,properties;if(!this.disposed){for(this.removeEventListeners(),this.$el.remove(),properties=["el","$el","options"],j=0,len=properties.length;len>j;j++)prop=properties[j],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},LinearGraph}(),Pingdom.LinearGraphCanvas=LinearGraphCanvas=function(superClass){function LinearGraphCanvas(){return this.render=bind(this.render,this),LinearGraphCanvas.__super__.constructor.apply(this,arguments)}return extend(LinearGraphCanvas,superClass),LinearGraphCanvas.prototype.defaultOptions={container:null,classNames:"",width:"100%",height:200,strokeWidth:2,xAxis:{key:"x",max:null},yAxis:{key:"y",max:null},series:[]},LinearGraphCanvas.prototype._setElement=function(){return this.$el=$('<canvas class="'+this.options.classNames+'"/>').appendTo(this.options.container),this.el=this.$el[0],this},LinearGraphCanvas.prototype.render=function(){var collection,j,len,ref,ref1,yMax;if(this.$el){for(this.el.width=this.$el.parent().width(),this.el.height=this.$el.parent().height(),yMax=(null!=(ref=this.options.yAxis)?ref.max:void 0)||function(_this){return function(){var collection,j,l,len,len1,model,ref1,ref2,result;for(result=0,ref1=_this.series,j=0,len=ref1.length;len>j;j++)for(collection=ref1[j],ref2=collection.models,l=0,len1=ref2.length;len1>l;l++)model=ref2[l],model.get("valueY")>result&&(result=model.get("valueY"));return result}}(this)(),this.el.getContext("2d").clearRect(0,0,this.el.width,this.el.height),ref1=this.series,j=0,len=ref1.length;len>j;j++)collection=ref1[j],this.renderSerie(collection,_.extend(collection.options,{yMax:yMax}));return this}},LinearGraphCanvas.prototype.renderSerie=function(collection,options){var d,j,len,path,ref;for(d={width:this.getElementDimensions()[0],height:this.getElementDimensions()[1]},ref=this.getLinePaths(collection,options),j=0,len=ref.length;len>j;j++)path=ref[j],this.renderLine(path,d,options);return this},LinearGraphCanvas.prototype.renderLine=function(path,d,options){var color,ctx,gradient,index,j,l,len,len1,len2,m,minY,p,paths,ref;if(ctx=this.el.getContext("2d"),ctx.lineWidth=options.lineWidth||2,ctx.lineCap=options.lineCap||"round",paths=path.match(/[ML].[0-9.]+.[0-9.]+/g)){for(ctx.beginPath(),minY=d.height,j=0,len=paths.length;len>j;j++)switch(p=paths[j],Math.floor(p.split(/\s/)[2])<minY&&(minY=p.split(/\s/)[2]),p[0].toUpperCase()){case"M":ctx.moveTo(p.split(/\s/)[1],new Number(p.split(/\s/)[2])+ctx.lineWidth/2);break;case"L":ctx.lineTo(p.split(/\s/)[1],new Number(p.split(/\s/)[2])+ctx.lineWidth/2)}if(ctx.lineTo(paths[paths.length-1].split(/\s/)[1],d.height),ctx.lineTo(paths[0].split(/\s/)[1],d.height),ctx.closePath(),_.isArray(options.fillColor)){for(gradient=ctx.createLinearGradient(0,minY,0,d.height),ref=options.fillColor,index=l=0,len1=ref.length;len1>l;index=++l)color=ref[index],gradient.addColorStop(index/(options.fillColor.length-1),color);ctx.fillStyle=gradient}else ctx.fillStyle=options.fillColor||"#c7e6fd";for(ctx.fill(),ctx.beginPath(),m=0,len2=paths.length;len2>m;m++)switch(p=paths[m],p[0].toUpperCase()){case"M":ctx.moveTo(p.split(/\s/)[1],new Number(p.split(/\s/)[2])+ctx.lineWidth/2);break;case"L":ctx.lineTo(p.split(/\s/)[1],new Number(p.split(/\s/)[2])+ctx.lineWidth/2)}return ctx.strokeStyle=options.strokeColor||"#5eb7f9",ctx.stroke(),this}},LinearGraphCanvas}(Pingdom.LinearGraph),isCanvasSupported=function(){var elem;return elem=document.createElement("canvas"),!(!elem.getContext||!elem.getContext("2d"))},isCanvasSupported()?void 0:Pingdom.LinearGraphCanvas=Pingdom.LinearGraph}(window.Pingdom||{})}).call(this);
(function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};!function(window,Pingdom,$){var Check,Checks,Collection,DAY,HOUR,MINUTE,MONTH,Mediator,Model,MyPingdom,RowInViewHandler,SECOND,UptimeActionbar,UptimeGroup,UptimeRow,UptimeTable,View,WEEK,YEAR,actionsBar,checkBulkModal,checkMenu,datePicker,dateRangeSelect,editModal,rangeMin,ref,rowInViewHandler,table,tableColumns,toggleUpgradeIncentive,uptimeChecks;return ref=Pingdom["const"],SECOND=ref.SECOND,MINUTE=ref.MINUTE,HOUR=ref.HOUR,DAY=ref.DAY,WEEK=ref.WEEK,MONTH=ref.MONTH,YEAR=ref.YEAR,MyPingdom=window.MyPingdom||{},MyPingdom.checksIndex=MyPingdom.checksIndex||{},MyPingdom.checksIndex.editModal=editModal=new MyPingdom.check.UptimeModal,Collection=Pingdom.Backbone.Collection,Model=Pingdom.Backbone.Model,View=Pingdom.Backbone.View,Mediator=_.extend({},Backbone.Events),toggleUpgradeIncentive=function(accountType,checksLeft,canBuyStuff){return"FREE"===accountType&&0>=checksLeft&&canBuyStuff?$("#checks-upgrade-notice").show():$("#checks-upgrade-notice").hide()},toggleUpgradeIncentive(current_account.account_type,MyPingdom.metrics.checks_left_uptime,MyPingdom.rights.canBuyStuff),Check=function(superClass){function Check(){return Check.__super__.constructor.apply(this,arguments)}return extend(Check,superClass),Check.prototype.initialize=function(){return Check.__super__.initialize.apply(this,arguments)},Check}(Model),Checks=function(superClass){function Checks(){return this.onModifiedChecks=bind(this.onModifiedChecks,this),Checks.__super__.constructor.apply(this,arguments)}return extend(Checks,superClass),_.extend(Checks.prototype,Pingdom.Backbone.SyncMachine),Checks.prototype.url="/data/v3/checks?type=sensor&showencryption=true&include_tags=true",Checks.prototype.model=Check,Checks.prototype.initialize=function(){return editModal.on("save-done",this.onModifiedChecks),this.on("request",this.beginSync),this.on("sync",this.finishSync),this.on("error",this.unsync),Checks.__super__.initialize.apply(this,arguments)},Checks.prototype.onModifiedChecks=function(method,data){var item;if(data.tags&&(data.tags=data.tags.split(",").map(function(name){return{name:name,type:"u",count:"1"}})),"PUT"===method.toUpperCase()){if(item=this.get(data.id),!item)return;data.status="unknown",item.set(data)}return"POST"!==method.toUpperCase()||item||this.add(data),Pingdom.page.trigger("populateGlobalAccountMetrics")},Checks.prototype.parse=function(result){var _t,check,i,j,len,ref1,ref2,utc_timestamp;for(this.counts=result.counts,utc_timestamp=timeToUTC(new Date),ref1=result.checks,i=j=0,len=ref1.length;len>j;i=++j)check=ref1[i],check.selected=!1,"paused"!==(ref2=check.status.toLowerCase())&&"up"!==ref2&&"down"!==ref2&&(result.checks[i].status="unknown"),"http"===check.type&&check.encryption&&(check.type="https"),check.lasterrortime?"down"!==check.status?(_t=timeStampDiff(utc_timestamp,check.lasterrortime),_t.years>0?check.timeSinceLastDown=_t.years+" y":_t.months>0?check.timeSinceLastDown=_t.months+" mo":_t.days>0?check.timeSinceLastDown=_t.days+" d":_t.hours>0?check.timeSinceLastDown=_t.hours+" h":_t.minutes>1?check.timeSinceLastDown=_t.minutes+" m":check.timeSinceLastDown="Just Now"):check.timeSinceLastDown="Down":(check.lasterrortime=0,check.timeSinceLastDown="&infin;"),result.checks[i]=check;return result.checks},Checks.prototype.destroy=function(){return editModal.off("save-done"),Checks.__super__.destroy.apply(this,arguments)},Checks}(Collection),uptimeChecks=new Checks,checkMenu=new Pingdom.popup.Menu({items:[{text:"Edit",callback:function(item,evt){return item=this.item,editModal.load(item.get("id"))},condition:function(){return MyPingdom.rights.canEditCheck}},{text:"Pause",callback:function(item,evt){return item=this.item,$.ajax({url:"/checks/"+item.get("id")+"/pause",type:"POST"}).done(function(){return item.set("status","paused")})},condition:function(){return MyPingdom.rights.canEditCheck&&"paused"!==this.item.get("status")}},{text:"Unpause",callback:function(item,evt){return item=this.item,$.ajax({url:"/checks/"+item.get("id")+"/unpause",type:"POST",success:function(data,status,jqXHR){return item.set("status","unknown")}})},condition:function(){return MyPingdom.rights.canEditCheck&&"paused"===this.item.get("status")}},{text:"Hold to delete",callback:function(){var item;return item=this.item,$.ajax({url:"/checks/"+item.get("id")+"/delete",type:"POST",success:function(data,status,jqXHR){return uptimeChecks.remove(item),window.location.reload()}})},condition:function(){return MyPingdom.rights.canEditCheck},hold:!0},{text:"View reports",callback:function(item,evt){return item=this.item,window.location.href="/reports/uptime#check="+item.get("id")}}]}),RowInViewHandler=function(){function RowInViewHandler(){this._processViews=bind(this._processViews,this),this.processViews=bind(this.processViews,this),this.setGraphSpan=bind(this.setGraphSpan,this),$(window).off("scroll.uptimeTable").on("scroll.uptimeTable",_.throttle(this.processViews,500)),this._from=Math.floor(Date.now()/1e3)-86400,this._to=Math.floor(Date.now()/1e3)}return RowInViewHandler.prototype.items=new Collection,RowInViewHandler.prototype.addRowView=function(rowView,groupView){return this.items.get(rowView.cid)?void this.processViews():(this.items.add({id:rowView.cid,rowView:rowView,groupView:groupView}),this.processViews(),this)},RowInViewHandler.prototype.removeRowView=function(rowView){return this.items.remove(rowView.cid),this},RowInViewHandler.prototype.setGraphSpan=function(from,to){return"number"==typeof from&&(this._from=from),"number"==typeof to?this._to=to:void 0},RowInViewHandler.prototype.processViews=function(){return this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this._processViews,500),this},RowInViewHandler.prototype._processViews=function(){var $w,docViewBottom,docViewTop,el,groupView,item,j,len,offsetTop,parentOffsetTop,ref1,ref2,results,rowView;for($w=$(window),docViewTop=$w.scrollTop()-122,docViewBottom=docViewTop+$w.height()+122,ref1=this.items.models,results=[],j=0,len=ref1.length;len>j;j++)item=ref1[j],ref2=item.attributes,rowView=ref2.rowView,groupView=ref2.groupView,(null!=rowView.el||null!=groupView.el)&&rowView.visible&&(el=rowView.el,parentOffsetTop=groupView.el.offsetTop,offsetTop=parentOffsetTop+el.offsetTop,offsetTop+rowView.$el.outerHeight()<=docViewBottom&&offsetTop>=docViewTop?results.push(rowView.updateGraph(this._from,this._to)):results.push(void 0));return results},RowInViewHandler}(),rowInViewHandler=new RowInViewHandler,UptimeRow=function(superClass){function UptimeRow(){return this.renderGraph=bind(this.renderGraph,this),this.parseGraphData=bind(this.parseGraphData,this),this.loadGraphData=bind(this.loadGraphData,this),UptimeRow.__super__.constructor.apply(this,arguments)}return extend(UptimeRow,superClass),UptimeRow.prototype.elementHeight=null,UptimeRow.prototype.events={'change.input[type="checkbox"]':function(evt){var selected;return selected=$(evt.target).is(":checked"),this.model.get("selected")!==selected?(this.model.set("selected",selected),Mediator.trigger("selectionChanged")):void 0},"click .popup-menu-trigger-button":"openCheckMenu","click td.pd-table-graph":"openReport",click:"openEditModal"},UptimeRow.prototype.initialize=function(){return this.graphUpdated=void 0,this.jsonMinifier=new Pingdom.utils.JsonMinifier,this.listenTo(this.model,"change:selected",function(){return this.$el.find('input[type="checkbox"]').prop("checked",this.model.get("selected"))}),this.listenTo(this.model,"change:status",function(){var graph;if(this.$el)return graph=this.$(".pd-table-graph"),this.render(),this.$(".pd-table-graph").replaceWith(graph),graph=null,Mediator.trigger("selectionChanged")}),this.jsonNameMaps={raw:{data:"d",graphUpdated:"g"},data:{id:"i",type:"t",raw_performance:"p",outages:"o"},outages:{status:"s",timefrom:"f",timeto:"t",duration:"d"},performance:{avgresponse:"a",downtime:"d",starttime:"s",unmonitored:"u",uptime:"v",uptime_percent:"w",downtime_percent:"e",unmonitored_percent:"x"}}},UptimeRow.prototype.template=function(data){return _.template('<td>\n    <input class="pd-checkbox pd-table-select" type="checkbox" <%- getRowData(\'selected\') ? \'checked=""\' : \'\' %>\n        value="<%= getRowData(\'id\') %>" name="unknown" id="checkbox-check-<%= getRowData(\'id\') %>">\n    <label class="pd-checkbox-label" for="checkbox-check-<%= getRowData(\'id\') %>"></label>\n</td>\n<td>\n    <div class="pd-status pd-check-status-<%= getRowData(\'status\') %>\n        icon-<%= getRowData(\'status\') %>"></div>\n</td>\n<td>\n    <strong title="<%- getRowData(\'name\') %>"><%- getRowData(\'name\') %></strong><br>\n    <span title="<%= getRowData(\'hostname\') %>" class="pd-check-hostname">\n    <%- getRowData(\'hostname\') %>\n    </span>\n</td>\n<% if (MyPingdom.rights.canHaveTags) { %>\n<td>\n    <% if (getRowData(\'tags\').length) { %>\n    <div class="tag_holder">\n        <div class="tag_holder_image"></div>\n        <span><%= getRowData(\'tags\').length %></span>\n        <div class="tag_holder_block">\n            <% _.forEach(tags, function (tag) { %>\n                <div class="tag_wrapper">\n                    <span class="tag_external tag"><%- tag.name %></span><span class="tag_external_number tag"><%- tag.count %></span>\n                </div>\n            <% });%>\n        </div>\n    </div>\n    <% } %>\n</td>\n<% } %>\n<td><%- getRowData(\'type\').toUpperCase() %></td>\n<td class="pd-table-column-responsive pd-table-number">\n    <span class="js-totaluptime">Loading...</span>\n</td>\n<td class="pd-table-lastdown pd-table-column-responsive pd-table-number">\n    <span style="display: none;"><%= getRowData(\'lasterrortime\') %></span>\n    <div><%= getRowData(\'timeSinceLastDown\') %></div>\n</td>\n<td class="pd-table-graph">\n    <div class="pd-responsetime-graph js-check-graph"></div>\n    <div class="pd-uptime-graph"></div>\n</td>\n<td class="pd-table-column-responsive">\n    <span class="pd-table-graph-label responsetime js-responsetime">Loading...</span><br>\n    <span class="pd-table-graph-label js-totaldowntime">Loading...</span>\n</td>\n<td>\n    <div class="popup-menu-trigger-button" data-check-id="<%= getRowData(\'id\') %>" style="float: right;"></div>\n</td>')(data)},UptimeRow.prototype.openCheckMenu=function(evt){return evt.preventDefault(),evt.stopPropagation(),checkMenu.item=this.model,checkMenu.rowEl=this.$el,checkMenu.open.call(checkMenu,evt),checkMenu.positionAt.call(checkMenu,evt.currentTarget)},UptimeRow.prototype.openReport=function(evt){return evt.preventDefault(),evt.stopPropagation(),window.location=location.origin+"/reports/responsetime#check="+this.model.get("id")},UptimeRow.prototype.openEditModal=function(evt){return $(evt.target).hasClass("pd-checkbox-label")||$(evt.target).hasClass("pd-checkbox")?void 0:(evt.preventDefault(),evt.stopPropagation(),editModal.load(this.model.get("id")))},UptimeRow.prototype.updateGraph=function(from,to){return from&&"number"==typeof from||(from=Math.floor(Date.now()/1e3)-86400),this.from!==from&&(this.graphUpdated=0),this.from=from,to&&"number"==typeof to||(to=Math.floor(Date.now()/1e3)),this.to!==to&&(this.graphUpdated=0),this.to=to,this.el?(this.renderGraphDataFromCache(this.model.get("id")),(!this.graphUpdated||Date.now()-this.graphUpdated>MINUTE)&&(this.loadGraphData().done(this.parseGraphData).fail(function(_this){return function(){return _this.$el?(_this.$(".js-check-graph").html("<div style='color: red;'>Error loading data</div>"),_this.$(".js-responsetime").html("? min"),_this.$(".js-totaldowntime").html("? ms")):void 0}}(this)),this.graphUpdated=Date.now()),void 0===this.graphUpdated?this.graphUpdated=0:void 0):void 0},UptimeRow.prototype.abortGraphRequest=function(){return this.graphRequest?this.graphRequest.abort():void 0},UptimeRow.prototype.loadGraphData=function(){return this.abortGraphRequest(),this.graphRequest=$.get("/data/checks/graph/"+this.model.get("id")+"?from="+this.from+"&to="+this.to)},UptimeRow.prototype.parseGraphData=function(data){var i,j,k,len,len1,perf,ref1,responsetime,series,totaResponseTime,totalAverageResponseTime,totalResponseTimes;if(data){for(totalResponseTimes=[],totalAverageResponseTime="N/A",totaResponseTime=0,series={data:[],fillColor:["#baeafa","rgba(186,234,250,0)"]},ref1=data.raw_performance,i=j=0,len=ref1.length;len>j;i=++j)perf=ref1[i],(null!=perf?perf.avgresponse:void 0)>0&&totalResponseTimes.push(perf.avgresponse),(null!=perf?perf.avgresponse:void 0)?series.data[i]=perf.avgresponse:series.data[i]=null;for(k=0,len1=totalResponseTimes.length;len1>k;k++)responsetime=totalResponseTimes[k],totaResponseTime+=responsetime;if(totalResponseTimes.length>0&&(totalAverageResponseTime=Math.round(totaResponseTime/totalResponseTimes.length)),"N/A"===totalAverageResponseTime?series.fillColor=["#cccccc","rgba(204,204,204,0)"]:totalAverageResponseTime+=" ms",this.$el)return this.$(".js-responsetime").html(totalAverageResponseTime),this.renderGraph(series),this.renderOutages(data),"standard"===data.type?this.storeGraphDataInCache(data):void 0}},UptimeRow.prototype.renderGraph=function(series){return this.linearGraph&&this.linearGraph.dispose(),this.$(".js-check-graph").empty(),this.linearGraph=new Pingdom.LinearGraphCanvas({container:this.$(".js-check-graph"),series:[series]})},UptimeRow.prototype.renderOutages=function(data){var $uptimeGraph,eventEndTime,eventStartTime,graphLengthMinutes,j,leftTimeSpace,leftTimeSpacePercentage,len,outage,ref1,totalDowntime,widthPercentage;for(totalDowntime=0,data.outages.sort(sortByTimeFrom),graphLengthMinutes=Math.ceil((this.to-this.from)/60),$uptimeGraph=this.$(".pd-uptime-graph"),$uptimeGraph.empty(),ref1=data.outages,j=0,len=ref1.length;len>j;j++)outage=ref1[j],"down"===outage.status&&(eventStartTime=outage.timefrom,eventEndTime=outage.timeto,this.from<eventEndTime&&(leftTimeSpace=Math.max(0,Math.round((eventStartTime-this.from)/60)),leftTimeSpacePercentage=leftTimeSpace/graphLengthMinutes*100,widthPercentage=(outage.timeto-outage.timefrom)/(60*graphLengthMinutes)*100,$uptimeGraph.append("<div class='marker' style='width: "+widthPercentage+"%; left: "+leftTimeSpacePercentage+"%; min-width: 1px;'></div>")),totalDowntime+=outage.duration);return totalDowntime?(this.model.set("uptime",1-totalDowntime/(60*graphLengthMinutes)),this.$(".js-totaldowntime").html(moment.duration(totalDowntime,"seconds").humanize())):(this.model.set("uptime",1),this.$(".js-totaldowntime").html("0 min")),this.$(".js-totaluptime").html((100*this.model.get("uptime")).toFixed(2)+"%")},UptimeRow.prototype.renderGraphDataFromCache=function(id,type){var cacheStr,cached,e,raw;null==type&&(type="standard");try{if(cacheStr=PingdomCommon.utils.storage.session().get(type+"_"+this.model.get("id")+"_"+this.from+"_"+this.to))return raw=JSON.parse(cacheStr),cached=this.expandCacheData(raw),cached.graphUpdated&&(this.graphUpdated=cached.graphUpdated),this.parseGraphData(cached.data,"cache")}catch(_error){return e=_error,null}},UptimeRow.prototype.storeGraphDataInCache=function(data){var cache,e,store,type;type=data.type,data.type="cache",store={id:data.id,t:data.type,rp:data.raw_performance},cache=this.compressCacheData({data:data,graphUpdated:Date.now()});try{return PingdomCommon.utils.storage.session().set(type+"_"+data.id+"_"+this.from+"_"+this.to,JSON.stringify(cache))}catch(_error){return e=_error,null}},UptimeRow.prototype.compressCacheData=function(data){var mini;return mini=this.jsonMinifier.compress(data,this.jsonNameMaps.raw),mini.d=this.jsonMinifier.compress(mini.d,this.jsonNameMaps.data),mini.d.o=this.jsonMinifier.compress(mini.d.o,this.jsonNameMaps.outages),mini.d.p=this.jsonMinifier.compress(mini.d.p,this.jsonNameMaps.performance),mini},UptimeRow.prototype.expandCacheData=function(data){var exp;return exp=this.jsonMinifier.expand(data,this.jsonNameMaps.raw),exp.data=this.jsonMinifier.expand(exp.data,this.jsonNameMaps.data),exp.data.outages=this.jsonMinifier.expand(exp.data.outages,this.jsonNameMaps.outages),exp.data.raw_performance=this.jsonMinifier.expand(exp.data.raw_performance,this.jsonNameMaps.performance),exp},UptimeRow.prototype.dispose=function(){return rowInViewHandler.removeRowView(this),UptimeRow.__super__.dispose.apply(this,arguments)},UptimeRow}(Pingdom.pdTable3.TableRow),UptimeGroup=function(superClass){function UptimeGroup(){return UptimeGroup.__super__.constructor.apply(this,arguments)}return extend(UptimeGroup,superClass),UptimeGroup.prototype.events={"click .group-title":"collapseToggle","click .table-group-column":"sortOnColumn","click .js-partial-checks .pd-button":function(evt){return evt.preventDefault(),this.partialLimit+=20,this.filter(),rowInViewHandler&&rowInViewHandler.processViews(),this.$el?this.$(".partial-checks").toggle(this.partialDisplayButtonCheck()):void 0}},UptimeGroup.prototype.initialize=function(){return this.partialLimit=15,this.parsialLimitReached=!1,this.listenTo(this,"addedToParent",this.onVisiblityChange.bind(this)),this.listenTo(this,"visibilityChange",this.onVisiblityChange.bind(this)),this.listenTo(this,"collapsed",function(){return this.$el?this.$(".partial-checks").toggle(this.partialDisplayButtonCheck()):void 0}),UptimeGroup.__super__.initialize.apply(this,arguments)},UptimeGroup.prototype.onVisiblityChange=function(){return this.updateGraphs()},UptimeGroup.prototype.updateGraphs=function(from,to){return rowInViewHandler.setGraphSpan(from,to),$(document).ready(function(_this){return function(){var cid,ref1,results,rowView;ref1=_this.getItemViews(),results=[];for(cid in ref1)rowView=ref1[cid],results.push(rowInViewHandler.addRowView(rowView,_this));return results}}(this))},UptimeGroup.prototype.partialDisplayButtonCheck=function(){return this.parsialLimitReached&&!this.collapsed},UptimeGroup.prototype.getTemplateFunction=function(){return function(_this){return function(data){var html,partialDisplay;return html=_this.template(data),partialDisplay=_this.partialDisplayButtonCheck()?"block":"none",html+='<div style="display: '+partialDisplay+'; text-align: center; padding-top: 8px" class="partial-checks js-partial-checks">\n    <a href="#" class="pd-button dark" style="float: none; display: inline-block;">Display more</a>\n    <div class="clearfix"></div>\n</div>'}}(this)},UptimeGroup.prototype.filterer=function(item,index,passedItems){var included;return(included=UptimeGroup.__super__.filterer.call(this,item,index,passedItems))?(this.parsialLimitReached=!1,passedItems+1>this.partialLimit?this.parsialLimitReached=!0:this.parsialLimitReached=!1,this.$el&&this.$(".partial-checks").toggle(this.partialDisplayButtonCheck()),!this.parsialLimitReached):!1},UptimeGroup.prototype.sortOnField=function(field,direction){return UptimeGroup.__super__.sortOnField.apply(this,arguments),this.updateGraphs()},UptimeGroup}(Pingdom.pdTable3.TableGroup),UptimeTable=function(superClass){function UptimeTable(){return this.setTags=bind(this.setTags,this),this.setStatusFilter=bind(this.setStatusFilter,this),this.setSearchTerm=bind(this.setSearchTerm,this),UptimeTable.__super__.constructor.apply(this,arguments)}return extend(UptimeTable,superClass),UptimeTable.prototype.searchTerm="",UptimeTable.prototype.initGroupView=function(model){var view;return view=UptimeTable.__super__.initGroupView.apply(this,arguments),this.listenTo(view,"filter",function(_this){return function(view){return _this.filter(view)}}(this)),this.listenTo(view,"collapsed",function(_this){return function(){return _this.updateGraphs(),_this.trigger("group-collapsed")}}(this)),view},UptimeTable.prototype.updateGraphs=function(from,to){var cid,groupView,ref1,results;ref1=this.getGroupItemViews(),results=[];for(cid in ref1)groupView=ref1[cid],results.push(groupView.updateGraphs(from,to));return results},UptimeTable.prototype.filterCallback=function(view,included){return UptimeTable.__super__.filterCallback.apply(this,arguments),included?void 0:view.abortGraphRequest()},UptimeTable.prototype.setSearchTerm=function(searchTerm,callback,options){return searchTerm=searchTerm.toLowerCase(),this.searchTerm!==searchTerm?(this.searchTerm=searchTerm,this.addFilter("actionbar.search",function(item,index){var col,j,len,ref1,val;if(searchTerm&&""!==searchTerm){for(ref1=this.model.get("cols"),j=0,len=ref1.length;len>j;j++)if(col=ref1[j],col.field&&(val=item.get(col.field),_.isString(val)&&val.toLowerCase().indexOf(searchTerm)>-1))return!0;return!1}return!0}),this):void 0},UptimeTable.prototype.getSearchTerm=function(){return this.searchTerm},UptimeTable.prototype.setStatusFilter=function(filter,options){return this.addFilter("actionbar.status",function(item,index){return filter.length?filter.indexOf(item.get("status"))>-1:!0}),this},UptimeTable.prototype.setTags=function(tags,options){return this.trigger("tags",tags,options),this.addFilter("actionbar.tags",function(item,index){var j,len,ref1,ref2,tag;if(1===tags.length&&""===tags[0])return!0;for(ref1=item.get("tags"),j=0,len=ref1.length;len>j;j++)if(tag=ref1[j],ref2=tag.name,indexOf.call(tags,ref2)>=0)return!0;return!1}),this},UptimeTable}(Pingdom.pdTable3),tableColumns=[{width:"20px"},{width:"32px"},{title:"Site Name",field:"name",order:"down",width:"180px"},{title:"Type",field:"type",width:"60px"},{title:"Uptime",width:"55px",textalign:"right"},{title:"Up Since",field:"lasterrortime",width:"60px",textalign:"right"},{title:"Response Time / Outages"},{width:"65px"},{width:"24px"}],MyPingdom.rights.canHaveTags&&tableColumns.splice(3,0,{title:"Tags",field:"tags",width:"50px"}),table=new UptimeTable({container:this.$("#uptimeTablesContainer"),data:uptimeChecks,groupView:UptimeGroup,rowView:UptimeRow,autoRender:!0,groupBy:{field:"status",order:["unknown","down","up","paused"]},columns:tableColumns,sortOn:"name"}),uptimeChecks.fetch(),checkBulkModal=new MyPingdom.BulkModal,UptimeActionbar=function(superClass){function UptimeActionbar(options){if(this.rowVisibilityChange=bind(this.rowVisibilityChange,this),this.tableCheckboxChanges=bind(this.tableCheckboxChanges,this),!options.table)throw new Error("UptimeActionbar requires a table");table=options.table,this.$table=options.table.$el,UptimeActionbar.__super__.constructor.call(this,options),this.addParts(),this.on("action:tweetme",function(){MyPingdom.tweetForCheckModalOpen()}),this.addEventListerners(),this.render()}return extend(UptimeActionbar,superClass),UptimeActionbar.prototype.addParts=function(){var pickableDates,shouldShowTweetButton,tags;return shouldShowTweetButton=function(){return!1},this.addPart("MultiAction",{id:"multiaction",items:[{text:"Pause",condition:function(){return!this.parent.get("hasPause")}},{text:"Unpause",condition:function(){return this.parent.get("hasPause")}},{text:"Delete"}],condition:function(){return MyPingdom.rights.canEditCheck},dataQa:"check-actions"}),this.addPart("Select",{id:"group_by",items:[{value:"all",text:"No grouping"},{value:"status",text:"By status"},{value:"type",text:"By type"},{value:"hostname",text:"By hostname"}],dataQa:"group-by"}),this.getPart("group_by").setVal("status"),pickableDates=[{value:"1days",text:"Last 24 hours"},{value:"7days",text:"Last 7 days"},{value:"30days",text:"Last 30 days"},{value:"6months",text:"Last 6 months"},{value:"1year",text:"Last year"},{value:"custom",text:"Custom dates"}],"Free"===MyPingdom.userData.current_account.service_name&&pickableDates.splice(3,2),this.addPart("Select",{id:"dateRange",cssClasses:["pd-container-actions-filters-nohide"],items:pickableDates}),this.addPart("MultiSelect",{id:"multiselect",label:"Filter",collapse:!0,items:[{count:0,id:"up",name:"Up"},{count:0,id:"down",name:"Down"},{count:0,id:"paused",name:"Paused"}],pdTable:table,dataQa:"status-filter"}),MyPingdom.rights.canHaveTags&&(tags=this.addPart("Tags",{id:"tags",pdTable:table,rowNum:2,dataQa:"tags-input"}),$.when(MyPingdom.CheckTagManager.get()).then(function(){return tags.setTags(MyPingdom.CheckTagManager.storage)})),this.addPart("Stats",{id:"stats",itemName:"check",rowNum:2,source:this}),this.addPart("Search",{containerCss:"pd-actions-right",id:"search",pdTable:table,rowNum:2,dataQa:"search-input"}),this.addPart("Action",{condition:function(){return MyPingdom.rights.canEditCheck&&!shouldShowTweetButton()},containerCss:"pd-actions-right",text:"Add new",dataQa:"add-new"}),this.addPart("Action",{id:"tweetme",condition:function(){return MyPingdom.rights.canEditCheck&&shouldShowTweetButton()},containerCss:"pd-actions-right pd-action-tweet-for-check",text:"Tweet for check"})},UptimeActionbar.prototype.getSelectedChecks=function(){var hasPause,item,items,j,len,ref1;for(items=[],hasPause=!0,ref1=table.getVisibleItems(),j=0,len=ref1.length;len>j;j++)item=ref1[j],item.get("selected")&&(items.push(item),"paused"!==item.get("status")&&(hasPause=!1));return items.length||(hasPause=!1),this.set({hasPause:hasPause}),items},UptimeActionbar.prototype.tableCheckboxChanges=function(evt){var ids,item;return ids=function(){var j,len,ref1,results;for(ref1=this.getSelectedChecks(),results=[],j=0,len=ref1.length;len>j;j++)item=ref1[j],results.push(item.get("id"));return results}.call(this),this.getPart("multiaction").setState(ids,table.getVisibleItems().length),this.render()},UptimeActionbar.prototype.rowVisibilityChange=function(evt){var count,item,j,len,ref1,row,status;for(this.tableCheckboxChanges(),count={down:0,up:0,paused:0,unknown:0},ref1=table.getRowItemViews(),j=0,len=ref1.length;len>j;j++)row=ref1[j],item=row.model,status=item.get("status").toLowerCase(),void 0===count[status]&&(count[status]=0),count[status]+=1;return this.getPart("multiselect").setItemCount(count),this.getPart("stats").update(),this.render()},UptimeActionbar.prototype.getStats=function(){var cid,group,numTotal,numVisible,ref1;numTotal=0,numVisible=table.getVisibleItems().length,ref1=table.getGroupItemViews();for(cid in ref1)group=ref1[cid],numTotal+=group.collection.length>group.partialLimit?group.partialLimit:group.collection.length;return{numVisible:numVisible,numTotal:numTotal}},UptimeActionbar.prototype.reset=function(){return this.getPart("multiselect")&&(this.getPart("multiselect").selectNone(),this.getPart("multiselect").isDirty=!0),this.getPart("search")&&(this.getPart("search").data.string="",this.getPart("search").isDirty=!0),this.getPart("tags")&&(this.getPart("tags").data.tags=[],this.getPart("tags").isDirty=!0),table.removeFilter("actionbar")},UptimeActionbar.prototype.addEventListerners=function(){return Mediator.on("selectionChanged",this.rowVisibilityChange),table.on("group-collapsed",this.rowVisibilityChange),table.on("rowVisibilityChange",function(_this){return function(){return _this.visibilityTimeout&&clearTimeout(_this.visibilityTimeout),_this.visibilityTimeout=setTimeout(function(){return _this.rowVisibilityChange()},500)}}(this)),this.on("action:selectAll",function(_this){return function(){return _.forEach(table.getVisibleItems(),function(item){return item.set("selected",!0)}),_this.tableCheckboxChanges()}}(this)),this.on("action:selectNone",function(_this){return function(){return _.forEach(table.getVisibleItems(),function(item){return item.set("selected",!1)}),_this.tableCheckboxChanges()}}(this)),this.on("action:pause action:unpause action:delete",function(_this){return function(action,values){var item,items;return items=_this.getSelectedChecks(),checkBulkModal.set({action:action,items:function(){var j,len,results;for(results=[],j=0,len=items.length;len>j;j++)item=items[j],results.push(item.attributes);return results}(),itemName:"check",url:"/checks/"+values.join(",")+"/"+action}),checkBulkModal.open(),checkBulkModal.off("done"),"delete"===action?checkBulkModal.on("done",function(){return table.data.remove(items),window.location.reload()}):checkBulkModal.on("done",function(){var j,len,results;for(results=[],j=0,len=items.length;len>j;j++)switch(item=items[j],action){case"pause":results.push(item.set("status","paused"));break;case"unpause":results.push(item.set("status","unknown"));break;default:results.push(void 0)}return results})}}(this)),this.on("select:group_by",function(name,field){var order;return order=null,"status"===field&&(order=["down","up","paused"]),table.groupBy={field:field,order:order},table.groupItems(),table.filter()}),this.on("action:add_new",function(action,value){return MyPingdom.metrics.checks_left_uptime>0?editModal.reset():void(window.location.href="/account/subscription#NAmodal=Out-of-checks")})},UptimeActionbar}(Pingdom.actionbar.ActionsBar),actionsBar=new UptimeActionbar({container:"#checkTablesActions",table:table}),MyPingdom.rights.canEditCheck||$(".pd-js-rights-canEditCheck").remove(),rangeMin=null,"Free"===MyPingdom.userData.current_account.service_name&&(rangeMin=new Date,rangeMin=rangeMin.setDate(rangeMin.getDate()-45)),datePicker=new Pingdom.DateRangePicker2({element:$("#dateRangePickerContainer"),min:rangeMin,timezone:PingdomCommon.pingzone(current_user.timezone.id)}),dateRangeSelect=actionsBar.getPart("dateRange"),dateRangeSelect.on("select",function(name,value){return $("#dateRangePickerContainer").toggle("custom"===value),datePicker.focus(moment().subtract(1,"month"),0)}),$("#dateRangePickerContainer").hide(),datePicker.on("change:selection",function(span){var from,to;return from=moment(span.start).unix(),to=moment(span.end).unix(),table.updateGraphs(from,to)}),dateRangeSelect.on("select",function(name,dateRange){var datePickerFrom,datePickerTo,format,graphFrom,graphTo,numDays;return"custom"!==dateRange?(format="YYYY-MM-DD",numDays={"1days":1,"7days":7,"30days":30,"6months":182,"1year":365},datePickerFrom=moment().subtract(numDays[dateRange],"days").format(format),datePickerTo=moment().format(format),datePicker.selectRange(datePickerFrom,datePickerTo),graphFrom=moment().subtract(numDays[dateRange],"days").unix(),graphTo=moment().unix(),table.updateGraphs(graphFrom,graphTo)):void 0})}(window,window.Pingdom,jQuery)}).call(this);